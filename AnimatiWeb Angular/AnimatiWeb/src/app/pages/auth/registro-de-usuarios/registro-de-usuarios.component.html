<!DOCTYPE html>
<html lang="es">

<body>
  <div class="container">
    <div class="body">
      <h3>Registrarse</h3>
      <p>Complete el formulario con sus datos</p>
      <form [formGroup]="formRegistro" class="form">
        <div class="m-3">
          <label for="username" class="form-label">Nombre de Usuario</label>
          <input type="text" id="username" class="form-control" formControlName="username">
          <div *ngIf="formRegistro.get('username')?.invalid && (formRegistro.get('username')?.touched || formSubmitted)" class="text-danger">
            El nombre de usuario es requerido
          </div>
        </div>
        <div class="m-3">
          <label for="first_name" class="form-label">Nombre</label>
          <input type="text" id="first_name" class="form-control" formControlName="first_name">
          <div *ngIf="formRegistro.get('first_name')?.invalid && (formRegistro.get('first_name')?.touched || formSubmitted)" class="text-danger">
            El nombre es requerido
          </div>
        </div>
        <div class="m-3">
          <label for="last_name" class="form-label">Apellido</label>
          <input type="text" id="last_name" class="form-control" formControlName="last_name">
          <div *ngIf="formRegistro.get('last_name')?.invalid && (formRegistro.get('last_name')?.touched || formSubmitted)" class="text-danger">
            El apellido es requerido
          </div>
        </div>
        <div class="m-3">
          <label for="email" class="form-label">Correo Electrónico</label>
          <input type="email" id="email" class="form-control" formControlName="email">
          <div *ngIf="formRegistro.get('email')?.invalid && (formRegistro.get('email')?.touched || formSubmitted)" class="text-danger">
            <span *ngIf="formRegistro.get('email')?.errors?.['required']">El email es requerido</span>
            <span *ngIf="formRegistro.get('email')?.errors?.['email']">Ingrese un email válido</span>
          </div>
        </div>
        <div class="m-3">
          <label for="password" class="form-label">Contraseña</label>
          <div class="input-group">
            <input [type]="showPassword ? 'text' : 'password'" id="password" class="form-control" formControlName="password">
            <button type="button" class="btn btn-outline-secondary" (click)="togglePasswordVisibility('password')">
              {{ showPassword ? 'Ocultar' : 'Mostrar' }}
            </button>
          </div>
          <div *ngIf="passwordErrors.length > 0" class="text-danger">
            <div *ngFor="let error of passwordErrors">{{error}}</div>
          </div>
          <small class="form-text text-muted">
            La contraseña debe tener al menos 4 caracteres, incluyendo mayúsculas, minúsculas y números.
          </small>
        </div>
        <div class="m-3">
          <label for="confirmPassword" class="form-label">Confirmar Contraseña</label>
          <div class="input-group">
            <input [type]="showConfirmPassword ? 'text' : 'password'" id="confirmPassword" class="form-control" formControlName="confirmPassword">
            <button type="button" class="btn btn-outline-secondary" (click)="togglePasswordVisibility('confirmPassword')">
              {{ showConfirmPassword ? 'Ocultar' : 'Mostrar' }}
            </button>
          </div>
        </div>
        <fieldset>
          <label for="business-account">
            <input id="business-account" type="radio" name="account-type" class="inline">
            Deseo recibir correos electrónicos con novedades
          </label>
          <label for="terms-and-conditions">
            <input id="terms-and-conditions" type="checkbox" name="terms-and-conditions" class="inline">
            Acepto los <a href="./terms-y-co.html">términos y condiciones</a>
          </label>
          <div class="m-3">
            <button class="btn btn-primary mt-3" (click)="registrarse()">Enviar</button>
          </div>
        </fieldset>
      </form>
    </div>
  </div>
</body>
</html>